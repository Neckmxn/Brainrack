<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI Image Generator - Create stunning images from text">
    <title>Image Generator - Brainrack AI</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="animated-bg"></div>

    <header>
        <div class="header-content">
            <a href="/dashboard" class="logo">
                <span>ğŸ§ </span> Brainrack AI
            </a>
            <nav class="nav-actions">
                <a href="/dashboard" class="btn btn-secondary">Dashboard</a>
                <div class="menu-container">
                    <button class="icon-btn" id="menuBtn"><span>â‹®</span></button>
                    <div class="menu-dropdown" id="menuDropdown">
                        <a href="/dashboard" class="menu-item"><span>ğŸ </span> Dashboard</a>
                        <a href="/chat" class="menu-item"><span>ğŸ’¬</span> AI Chat</a>
                        <a href="/image" class="menu-item"><span>ğŸ¨</span> Image Generator</a>
                        <a href="/document" class="menu-item"><span>ğŸ“„</span> Document Analyzer</a>
                        <a href="/video" class="menu-item"><span>ğŸ¥</span> Video Generator</a>
                        <a href="/business" class="menu-item"><span>ğŸ’¼</span> Business Solutions</a>
                        <a href="/startup" class="menu-item"><span>ğŸš€</span> Startup Ideas</a>
                        <a href="/news" class="menu-item"><span>ğŸ“°</span> News</a>
                        <a href="/weather" class="menu-item"><span>â›…</span> Weather</a>
                        <a href="/contact" class="menu-item"><span>ğŸ“§</span> Contact Us</a>
                        <div class="menu-item" id="profileBtn"><span>ğŸ‘¤</span> Profile</div>
                        <div class="menu-item" id="themeToggle"><span>ğŸŒ“</span> Toggle Theme</div>
                        <div class="menu-item" id="settingsBtn"><span>âš™ï¸</span> Settings</div>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="image-generator">
            <div class="image-controls">
                <h2>AI Image Generator & Enhancer</h2>
                <div class="form-group">
                    <label for="imagePrompt">Describe the image you want to create</label>
                    <textarea id="imagePrompt" rows="4" placeholder="Example: A futuristic city at sunset with flying cars and neon lights"></textarea>
                </div>
                <div class="form-group">
                    <label for="imageStyle">Style (optional)</label>
                    <select id="imageStyle">
                        <option value="">Default</option>
                        <option value="photorealistic">Photorealistic</option>
                        <option value="digital art">Digital Art</option>
                        <option value="oil painting">Oil Painting</option>
                        <option value="watercolor">Watercolor</option>
                        <option value="anime">Anime</option>
                        <option value="3d render">3D Render</option>
                        <option value="sketch">Sketch</option>
                    </select>
                </div>
                <button class="btn btn-primary" id="generateBtn">Generate Image</button>
                <button class="btn btn-secondary" id="enhanceBtn" style="display: none;">Enhance Image</button>
            </div>

            <div id="loadingSpinner" style="display: none;">
                <div class="loading-spinner"></div>
                <p style="text-align: center; color: var(--text-secondary);">Generating your image...</p>
            </div>

            <div class="image-result" id="imageResult"></div>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        const imagePrompt = document.getElementById('imagePrompt');
        const imageStyle = document.getElementById('imageStyle');
        const generateBtn = document.getElementById('generateBtn');
        const enhanceBtn = document.getElementById('enhanceBtn');
        const imageResult = document.getElementById('imageResult');
        const loadingSpinner = document.getElementById('loadingSpinner');

        generateBtn.addEventListener('click', generateImage);
        enhanceBtn.addEventListener('click', enhanceImage);

        async function generateImage() {
            const prompt = imagePrompt.value.trim();
            const style = imageStyle.value;

            if (!prompt) {
                alert('Please describe the image you want to create');
                return;
            }

            const fullPrompt = style ? `${prompt}, ${style} style` : prompt;

            generateBtn.disabled = true;
            loadingSpinner.style.display = 'block';
            imageResult.innerHTML = '';

            try {
                const response = await fetch('/api/generate-image', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: fullPrompt })
                });

                const data = await response.json();

                if (data.error) {
                    throw new Error(data.error);
                }

                // Display generated image (this depends on the API response structure)
                displayImage(data);
                enhanceBtn.style.display = 'inline-flex';

            } catch (error) {
                console.error('Error:', error);
                imageResult.innerHTML = `<div class="alert alert-error">Failed to generate image: ${error.message}</div>`;
            } finally {
                generateBtn.disabled = false;
                loadingSpinner.style.display = 'none';
            }
        }

        function displayImage(data) {
            // Note: The actual implementation depends on the API response structure
            // This is a placeholder implementation
            const imageCard = document.createElement('div');
            imageCard.className = 'image-card';
            imageCard.innerHTML = `
                <h3>Generated Image</h3>
                <p>Image generation is ready! Please configure your OpenRouter API key with DALL-E 3 access.</p>
                <p class="alert alert-warning">Response: ${JSON.stringify(data)}</p>
            `;
            imageResult.appendChild(imageCard);
        }

        function enhanceImage() {
            const prompt = imagePrompt.value.trim();
            imagePrompt.value = `highly detailed, 8k quality, professional photography, ${prompt}`;
            generateImage();
        }
    </script>
</body>
</html>